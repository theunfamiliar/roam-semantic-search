{"asctime": "2025-05-29 07:38:34", "levelname": "ERROR", "name": "app.services.search", "message": "Search failed", "filename": "search.py", "funcName": "search", "lineno": 66, "process": 1, "thread": 281473219116352, "exc_info": "Traceback (most recent call last):\n  File \"/app/app/services/search.py\", line 39, in search\n    if not all(map(lambda f: os.path.exists(f), files.values())):\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/services/search.py\", line 39, in <lambda>\n    if not all(map(lambda f: os.path.exists(f), files.values())):\n                             ^^\nNameError: name 'os' is not defined"}
{"asctime": "2025-05-29 07:38:34", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 24, "process": 1, "thread": 281473219116352, "exc_info": "Traceback (most recent call last):\n  File \"/app/app/routes/search.py\", line 17, in search_endpoint\n    results = search(request)\n              ^^^^^^^^^^^^^^^\n  File \"/app/app/services/search.py\", line 39, in search\n    if not all(map(lambda f: os.path.exists(f), files.values())):\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/services/search.py\", line 39, in <lambda>\n    if not all(map(lambda f: os.path.exists(f), files.values())):\n                             ^^\nNameError: name 'os' is not defined"}
{"asctime": "2025-05-29 07:38:58", "levelname": "ERROR", "name": "app.services.indexing", "message": "Failed to fetch TOC data", "filename": "indexing.py", "funcName": "_fetch_roam_data", "lineno": 52, "process": 1, "thread": 281473219116352, "error": "Client error '401 Unauthorized' for url 'https://peer-13.api.roamresearch.com:3001/api/graph/None/q'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401", "status_code": 401, "response_text": "{\"message\":\"You are not authenticated\"}"}
{"asctime": "2025-05-29 07:38:58", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 240, "process": 1, "thread": 281473219116352, "exc_info": "Traceback (most recent call last):\n  File \"/app/app/services/indexing.py\", line 147, in reindex_brain\n    toc_result = await _fetch_roam_data(client, url, headers, toc_query, \"TOC data\")\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/services/indexing.py\", line 42, in _fetch_roam_data\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://peer-13.api.roamresearch.com:3001/api/graph/None/q'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401", "brain": "ideas", "error": "Client error '401 Unauthorized' for url 'https://peer-13.api.roamresearch.com:3001/api/graph/None/q'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401", "duration_seconds": 3.763566}
{"asctime": "2025-05-29 07:39:01", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747afe96943sm753935b3a.33 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 1, "thread": 281473219116352}
{"asctime": "2025-05-29 07:39:01", "levelname": "ERROR", "name": "app.routes.reindex", "message": "Reindex failed", "filename": "reindex.py", "funcName": "reindex_endpoint", "lineno": 30, "process": 1, "thread": 281473219116352, "exc_info": "Traceback (most recent call last):\n  File \"/app/app/routes/reindex.py\", line 20, in reindex_endpoint\n    result = await reindex_brain(brain)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/services/indexing.py\", line 147, in reindex_brain\n    toc_result = await _fetch_roam_data(client, url, headers, toc_query, \"TOC data\")\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/services/indexing.py\", line 42, in _fetch_roam_data\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://peer-13.api.roamresearch.com:3001/api/graph/None/q'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"}
{"asctime": "2025-05-30 14:35:44", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 91, "process": 99143, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 60, in reindex_brain\n    ref_uid, ref_content, ref_time, _ = ref\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nValueError: not enough values to unpack (expected 4, got 3)"}
{"asctime": "2025-05-30 14:35:47", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials 98e67ed59e1d1-3124e2b67ffsm727748a91.5 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99143, "thread": 8481349376}
{"asctime": "2025-05-30 14:35:47", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 98, "process": 99143, "thread": 8481349376}
{"asctime": "2025-05-30 14:35:47", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 91, "process": 99143, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 45, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:35:49", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials 98e67ed59e1d1-3124e2b67bcsm726396a91.8 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99143, "thread": 8481349376}
{"asctime": "2025-05-30 14:35:49", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 98, "process": 99143, "thread": 8481349376}
{"asctime": "2025-05-30 14:36:03", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 99143, "thread": 8481349376}
{"asctime": "2025-05-30 14:36:19", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 99143, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:36:19", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99143, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/faiss/swigfaiss.py\", line 11641, in read_index\n    return _swigfaiss.read_index(*args)\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^\nRuntimeError: Error in faiss::FileIOReader::FileIOReader(const char *) at /Users/runner/work/faiss-wheels/faiss-wheels/faiss/faiss/impl/io.cpp:68: Error: 'f' failed: could not open data/index_ideas.faiss for reading: No such file or directory"}
{"asctime": "2025-05-30 14:36:19", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99143, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 44, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 14:37:42", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 99462, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 60, in reindex_brain\n    ref_uid, ref_content, ref_time, ref_target = ref\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nValueError: not enough values to unpack (expected 4, got 3)"}
{"asctime": "2025-05-30 14:37:45", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747afeadc20sm2534114b3a.67 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99462, "thread": 8481349376}
{"asctime": "2025-05-30 14:37:45", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 99462, "thread": 8481349376}
{"asctime": "2025-05-30 14:37:45", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 99462, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 45, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:37:47", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials 98e67ed59e1d1-3124e2e8e80sm661177a91.24 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99462, "thread": 8481349376}
{"asctime": "2025-05-30 14:37:47", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 99462, "thread": 8481349376}
{"asctime": "2025-05-30 14:38:00", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 99462, "thread": 8481349376}
{"asctime": "2025-05-30 14:38:14", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 99462, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:38:14", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99462, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/faiss/swigfaiss.py\", line 11641, in read_index\n    return _swigfaiss.read_index(*args)\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^\nRuntimeError: Error in faiss::FileIOReader::FileIOReader(const char *) at /Users/runner/work/faiss-wheels/faiss-wheels/faiss/faiss/impl/io.cpp:68: Error: 'f' failed: could not open data/index_ideas.faiss for reading: No such file or directory"}
{"asctime": "2025-05-30 14:38:15", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99462, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 44, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 14:39:01", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 99698, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 60, in reindex_brain\n    ref_uid, ref_content, ref_time, ref_target = ref\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nValueError: not enough values to unpack (expected 4, got 3)"}
{"asctime": "2025-05-30 14:39:03", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506bcd56fsm22896555ad.48 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99698, "thread": 8481349376}
{"asctime": "2025-05-30 14:39:03", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 99698, "thread": 8481349376}
{"asctime": "2025-05-30 14:39:03", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 99698, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 45, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:39:06", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506cd8da6sm22848095ad.146 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 99698, "thread": 8481349376}
{"asctime": "2025-05-30 14:39:06", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 99698, "thread": 8481349376}
{"asctime": "2025-05-30 14:39:17", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 99698, "thread": 8481349376}
{"asctime": "2025-05-30 14:39:28", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 99698, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:39:28", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99698, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/faiss/swigfaiss.py\", line 11641, in read_index\n    return _swigfaiss.read_index(*args)\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^\nRuntimeError: Error in faiss::FileIOReader::FileIOReader(const char *) at /Users/runner/work/faiss-wheels/faiss-wheels/faiss/faiss/impl/io.cpp:68: Error: 'f' failed: could not open data/index_ideas.faiss for reading: No such file or directory"}
{"asctime": "2025-05-30 14:39:28", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 99698, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 44, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 14:41:19", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 112, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 60, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:41:22", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials 41be03b00d2f7-b2eceb9d1cbsm865151a12.56 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 112, "thread": 8481349376}
{"asctime": "2025-05-30 14:41:22", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 112, "thread": 8481349376}
{"asctime": "2025-05-30 14:41:33", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 112, "thread": 8481349376}
{"asctime": "2025-05-30 14:41:45", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 112, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:41:45", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 112, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/faiss/swigfaiss.py\", line 11641, in read_index\n    return _swigfaiss.read_index(*args)\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^\nRuntimeError: Error in faiss::FileIOReader::FileIOReader(const char *) at /Users/runner/work/faiss-wheels/faiss-wheels/faiss/faiss/impl/io.cpp:68: Error: 'f' failed: could not open data/index_ideas.faiss for reading: No such file or directory"}
{"asctime": "2025-05-30 14:41:45", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 76, "process": 112, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 50, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 44, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 14:43:48", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 645, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 70, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:43:51", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747affaf0bfsm2540586b3a.106 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 645, "thread": 8481349376}
{"asctime": "2025-05-30 14:43:51", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 645, "thread": 8481349376}
{"asctime": "2025-05-30 14:44:06", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 645, "thread": 8481349376}
{"asctime": "2025-05-30 14:44:17", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 645, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:46:21", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 92, "process": 1132, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 70, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:46:26", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506bc8a40sm23162625ad.2 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 1132, "thread": 8481349376}
{"asctime": "2025-05-30 14:46:26", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 99, "process": 1132, "thread": 8481349376}
{"asctime": "2025-05-30 14:46:40", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 1132, "thread": 8481349376}
{"asctime": "2025-05-30 14:46:54", "levelname": "ERROR", "name": "app.routes.search", "message": "Search failed", "filename": "search.py", "funcName": "search_endpoint", "lineno": 22, "process": 1132, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/search.py\", line 15, in search_endpoint\n    results = await search(request.query, request.brain, request.top_k)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/routes/test_search_routes.py\", line 24, in mock_search\n    raise ValueError(\"Search failed\")\nValueError: Search failed"}
{"asctime": "2025-05-30 14:46:54", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 77, "process": 1132, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 51, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 14:49:54", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex work brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 110, "process": 1549, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 107, in reindex_brain\n    raise Exception(f\"No blocks found under {toc_page}\")\nException: No blocks found under TOC - work"}
{"asctime": "2025-05-30 14:49:56", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747affadf5asm2473571b3a.115 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:49:56", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 117, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:49:56", "levelname": "ERROR", "name": "app.routes.reindex", "message": "Reindex failed", "filename": "reindex.py", "funcName": "reindex_endpoint", "lineno": 32, "process": 1549, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/reindex.py\", line 22, in reindex_endpoint\n    result = await reindex_brain(brain)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 107, in reindex_brain\n    raise Exception(f\"No blocks found under {toc_page}\")\nException: No blocks found under TOC - work"}
{"asctime": "2025-05-30 14:50:49", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex work brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 110, "process": 1549, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 107, in reindex_brain\n    raise Exception(f\"No blocks found under {toc_page}\")\nException: No blocks found under TOC - work"}
{"asctime": "2025-05-30 14:50:51", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747afe9638dsm2473386b3a.3 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:50:51", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 117, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:50:51", "levelname": "ERROR", "name": "app.routes.reindex", "message": "Reindex failed", "filename": "reindex.py", "funcName": "reindex_endpoint", "lineno": 32, "process": 1549, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/reindex.py\", line 22, in reindex_endpoint\n    result = await reindex_brain(brain)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 107, in reindex_brain\n    raise Exception(f\"No blocks found under {toc_page}\")\nException: No blocks found under TOC - work"}
{"asctime": "2025-05-30 14:50:51", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 110, "process": 1549, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 70, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:50:54", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-747affaf9f0sm2468460b3a.117 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:50:54", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 117, "process": 1549, "thread": 8481349376}
{"asctime": "2025-05-30 14:55:48", "levelname": "ERROR", "name": "app.http", "message": "Error processing POST /api/reindex", "filename": "logging.py", "funcName": "dispatch", "lineno": 65, "process": 2702, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/anyio/streams/memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/middleware/logging.py\", line 40, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 157, in call_next\n    raise RuntimeError(\"No response returned.\")\nRuntimeError: No response returned.", "event_type": "request_error", "request_id": "", "method": "POST", "path": "/api/reindex", "error": "No response returned.", "duration_seconds": 45.00859093666077}
{"asctime": "2025-05-30 14:56:18", "levelname": "ERROR", "name": "app.http", "message": "Error processing POST /api/reindex", "filename": "logging.py", "funcName": "dispatch", "lineno": 65, "process": 2702, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/anyio/streams/memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/middleware/logging.py\", line 40, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 157, in call_next\n    raise RuntimeError(\"No response returned.\")\nRuntimeError: No response returned.", "event_type": "request_error", "request_id": "", "method": "POST", "path": "/api/reindex", "error": "No response returned.", "duration_seconds": 30.003291845321655}
{"asctime": "2025-05-30 14:56:18", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 110, "process": 2702, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 72, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 14:56:21", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506cd8c4bsm23032675ad.110 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 2702, "thread": 8481349376}
{"asctime": "2025-05-30 14:56:21", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 117, "process": 2702, "thread": 8481349376}
{"asctime": "2025-05-30 14:57:18", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 2702, "thread": 8481349376}
{"asctime": "2025-05-30 14:58:21", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 77, "process": 2702, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 62, in search\n    D, I = index.search(np.array([embedding]).astype('float32'), request.top_k)\n           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/faiss/class_wrappers.py\", line 329, in replacement_search\n    assert d == self.d\n           ^^^^^^^^^^^\nAssertionError"}
{"asctime": "2025-05-30 14:58:21", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 77, "process": 2702, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 51, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 15:00:52", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 77, "process": 3603, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 51, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 15:01:48", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 81, "process": 3813, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 53, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 15:03:18", "levelname": "ERROR", "name": "app.http", "message": "Error processing POST /api/reindex", "filename": "logging.py", "funcName": "dispatch", "lineno": 65, "process": 3977, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/anyio/streams/memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/middleware/logging.py\", line 40, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 157, in call_next\n    raise RuntimeError(\"No response returned.\")\nRuntimeError: No response returned.", "event_type": "request_error", "request_id": "", "method": "POST", "path": "/api/reindex", "error": "No response returned.", "duration_seconds": 45.00827503204346}
{"asctime": "2025-05-30 15:03:48", "levelname": "ERROR", "name": "app.http", "message": "Error processing POST /api/reindex", "filename": "logging.py", "funcName": "dispatch", "lineno": 65, "process": 3977, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 148, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/anyio/streams/memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/middleware/logging.py\", line 40, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/.venv/lib/python3.13/site-packages/starlette/middleware/base.py\", line 157, in call_next\n    raise RuntimeError(\"No response returned.\")\nRuntimeError: No response returned.", "event_type": "request_error", "request_id": "", "method": "POST", "path": "/api/reindex", "error": "No response returned.", "duration_seconds": 30.004383087158203}
{"asctime": "2025-05-30 15:03:48", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 110, "process": 3977, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 37, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 72, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 15:03:51", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506bd94d3sm23337475ad.89 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 3977, "thread": 8481349376}
{"asctime": "2025-05-30 15:03:51", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 117, "process": 3977, "thread": 8481349376}
{"asctime": "2025-05-30 15:04:46", "levelname": "ERROR", "name": "app.utils.roam_api", "message": "HTTP error occurred: Mocked API error", "filename": "roam_api.py", "funcName": "query_roam", "lineno": 41, "process": 3977, "thread": 8481349376}
{"asctime": "2025-05-30 15:05:48", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 81, "process": 3977, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 53, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
{"asctime": "2025-05-30 15:09:15", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex work brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 155, "process": 4929, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 100, in reindex_brain\n    raise ValueError(f\"No blocks found under {toc_page}\")\nValueError: No blocks found under TOC - work"}
{"asctime": "2025-05-30 15:09:18", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506d16755sm23231155ad.246 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 4929, "thread": 8481349376}
{"asctime": "2025-05-30 15:09:18", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email notification: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 162, "process": 4929, "thread": 8481349376}
{"asctime": "2025-05-30 15:09:18", "levelname": "ERROR", "name": "app.routes.reindex", "message": "Reindex failed", "filename": "reindex.py", "funcName": "reindex_endpoint", "lineno": 32, "process": 4929, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/routes/reindex.py\", line 22, in reindex_endpoint\n    result = await reindex_brain(brain)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 100, in reindex_brain\n    raise ValueError(f\"No blocks found under {toc_page}\")\nValueError: No blocks found under TOC - work"}
{"asctime": "2025-05-30 15:09:18", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to reindex ideas brain", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 155, "process": 4929, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/indexing.py\", line 97, in reindex_brain\n    blocks = await get_blocks_under_toc(toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 57, in get_blocks_under_toc\n    result = await query_roam(query, toc_page)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/utils/roam_api.py\", line 32, in query_roam\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/integration/test_indexing.py\", line 72, in mock_post\n    raise Exception(\"API Error\")\nException: API Error"}
{"asctime": "2025-05-30 15:09:21", "levelname": "ERROR", "name": "app.services.notifications", "message": "\u274c Failed to send email: (535, b'5.7.8 Username and Password not accepted. For more information, go to\\n5.7.8  https://support.google.com/mail/?p=BadCredentials d9443c01a7336-23506d22d0dsm23210075ad.257 - gsmtp')", "filename": "notifications.py", "funcName": "send_email", "lineno": 28, "process": 4929, "thread": 8481349376}
{"asctime": "2025-05-30 15:09:21", "levelname": "ERROR", "name": "app.services.indexing", "message": "\u274c Failed to send email notification: object NoneType can't be used in 'await' expression", "filename": "indexing.py", "funcName": "reindex_brain", "lineno": 162, "process": 4929, "thread": 8481349376}
{"asctime": "2025-05-30 15:09:52", "levelname": "ERROR", "name": "app.services.search", "message": "Unexpected error during search", "filename": "search.py", "funcName": "search", "lineno": 81, "process": 4929, "thread": 8481349376, "exc_info": "Traceback (most recent call last):\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/app/services/search.py\", line 53, in search\n    index = faiss.read_index(files[\"index\"])\n  File \"/Users/jamesdunn/Documents/roam-semantic-search/tests/unit/services/test_search.py\", line 53, in mock_read_index\n    raise RuntimeError(\"FAISS error\")\nRuntimeError: FAISS error"}
